# Example mailcap file for Reddit Terminal Viewer
# https://github.com/michael-lazar/rtv/
#
# Copy the contents of this file to {HOME}/.mailcap, or point to using $MAILCAPS
# Then launch RTV using the --enable-media flag. All shell commands defined in
# this file depend on external programs that must be installed on your system.
#
# HELP REQUESTED! If you come up with your own commands (especially for OS X)
# and would like to share, please post an issue on the GitHub tracker and we
# can get them added to this file as references.
#
#
#                              Mailcap 101
# - The first entry with a matching MIME type will be executed, * is a wildcard
# - %s will be replaced with the image or video url
# - Add ``test=test -n "$DISPLAY"`` if your command opens a new window
# - Add ``needstermial`` for commands that use the terminal
# - Add ``copiousoutput`` for commands that dump text to stdout

###############################################################################
# Commands below this point will open media in a separate window without
# pausing execution of RTV.
###############################################################################

# Feh is a simple and effective image viewer
# Note that rtv returns a list of urls for imgur albums, so we don't put quotes
# around the `%s`
image/x-imgur-album; feh -g 640x480 %s; test=test -n "$DISPLAY"
image/*; feh -g 640x480 '%s'; test=test -n "$DISPLAY"

# Youtube videos are assigned a custom mime-type, which can be streamed with
# vlc or youtube-dl.
video/x-youtube; youtube-dl -q -o - '%s' | mpv - --autofit 640x480; test=test -n "$DISPLAY"

# Mpv is a simple and effective video streamer
video/webm; mpv '%s' --autofit 640x480 --loop=inf; test=test -n "$DISPLAY"
video/*; mpv '%s' --autofit 640x480 --loop=inf; test=test -n "$DISPLAY"

# Don't have a solution for albums yet
# image/x-imgur-album; echo

application/pdf; open -a Skim %s; nametemplate=%s.pdf; copiousoutput
application/dvi; xdvi %s; nametemplate=%s.dvi; copiousoutput
image/*;         feh %s; copiousoutput
text/html;       midori -a %s; test=test -n "$DISPLAY"; nametemplate=%s.html
text/html;       midori -a %s; test=test -n "$DISPLAY"; nametemplate=%s.html; copiousoutput
application/vnd.openxml;    open -a 'Microsoft Excel' %s; nametemplate=%s.xlsx
#application/msword; open -a 'Microsoft Word' %s; nametemplate=%s.doc
application/msword; open %s; nametemplate=%s.doc
application/msword; open %s; nametemplate=%s.docx
#application/msword; open -a 'Microsoft Word' %s; nametemplate=%s.docx
